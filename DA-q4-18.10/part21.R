# Построить "ледунку" (lollipop chart) — это наглядная альтернатива
# горизонтальному barplot: линии + кружок на конце.
# Сравним рейтинги 5 фильмов (0-10 баллов).


# МАЛЕНЬКИЙ ДАТАСЕТ (5 СТРОК)
Film   <- c("Фильм A", "Фильм B", "Фильм C", "Фильм D", "Фильм E")
Rating <- c(7.8,       6.2,       8.5,       5.9,       7.1)

df_films <- data.frame(Film, Rating)
df_films
str(df_films)

# УДОБНО СОРТИРОВАТЬ, ЧТОБЫ ПОДПИСИ ШЛИ ОТ МЕНЬШЕГО К БОЛЬШЕМУ
df_sorted <- df_films[order(df_films$Rating), ]
df_sorted

# ПОДГОТОВИМ ПОЛЕ ДЛЯ ГРАФИКА:
# - Рисуем ПУСТОЙ график (type="n"), чтобы задать оси/диапазоны.
# - Ось X — значения рейтинга (от 0 до, скажем, 10).
# - Ось Y — позиции 1..5, подписи — названия фильмов.
par(mar = c(5, 8, 4, 2))  # увеличим левый отступ для длинных подписей
n <- nrow(df_sorted)
plot(
  x = c(0, 10), y = c(1, n), type = "n",
  main = "Рейтинги фильмов (lollipop chart)",
  xlab = "Рейтинг (0–10)",
  ylab = "",
  yaxt = "n"  # отключаем авто-подписи по оси Y (сделаем свои)
)
axis(side = 2, at = 1:n, labels = df_sorted$Film, las = 1)  # свои подписи слева

# РИСУЕМ «ПАЛОЧКИ» (segments) ОТ 0 ДО ЗНАЧЕНИЯ, И «КОНФЕТКУ» (points)
segments(
  x0 = 0,                 # начало палочки на оси X
  y0 = 1:n,               # позиции по оси Y
  x1 = df_sorted$Rating,  # конец палочки = значение рейтинга
  y1 = 1:n,
  lwd = 3, col = "gray60" # толщина и цвет «палочки»
)
points(
  x = df_sorted$Rating, y = 1:n,
  pch = 16, cex = 1.2, col = "steelblue"  # «конфетка» на конце
)

# ДОПОЛНИТЕЛЬНО: ПОДПИШЕМ ЧИСЛО В КОНЦЕ ЛИНИИ
text(
  x = df_sorted$Rating, y = 1:n,
  labels = round(df_sorted$Rating, 1),
  pos = 4, cex = 0.9, col = "steelblue"
)
