# Построить сгруппированную столбчатую диаграмму (каждая категория имеет 2 столбца):
# сравнить "онлайн" и "офлайн" продажи для 4 категорий товаров.

# МАЛЕНЬКИЙ ДАТАСЕТ (4 СТРОКИ, 2 ПОКАЗАТЕЛЯ)
Category <- c("Ноутбук", "Планшет", "Телефон", "Наушники")  # 4 категории
Online   <- c(30, 18, 42, 15)                                # онлайн-продажи
Offline  <- c(20, 14, 25, 10)                                # офлайн-продажи

df_sales2 <- data.frame(Category, Online, Offline)
df_sales2
str(df_sales2)

# barplot() для сгруппированных столбиков ожидает матрицу (столбцы = серии)
# Преобразуем два числовых столбца в матрицу с именами строк = категории
m_sales <- t(as.matrix(df_sales2[, c("Online", "Offline")])) 
# t() — транспонирование, чтобы серии стали строками матрицы:
# строки матрицы = "Online","Offline"; столбцы = категории

colnames(m_sales) <- df_sales2$Category  # подписи для категорий по оси X
m_sales

# СТРОИМ СГРУППИРОВАННЫЙ barplot: beside=TRUE ставит столбцы рядом
barplot(
  height = m_sales,
  beside = TRUE,                           # включаем "рядом", а не "сложение"
  main   = "Онлайн vs офлайн продажи по категориям",
  xlab   = "Категория товара",
  ylab   = "Продажи, шт.",
  col    = c("steelblue", "orange"),       # цвета для двух серий
  las    = 2                                # повернуть подписи оси X для читаемости (вертикально)
)

# ДОБАВИМ ЛЕГЕНДУ, ЧТОБЫ ПОЯСНИТЬ ЦВЕТА
legend(
  "topleft",                                # положение легенды
  legend = c("Online", "Offline"),          # подписи легенды
  fill   = c("steelblue", "orange"),        # цвета, соответствующие столбикам
  bty    = "n"                              # без рамки ("no box")
)

# ЛЁГКАЯ СЕТКА ПО Y (НЕОБЯЗАТЕЛЬНО)
abline(h = pretty(range(m_sales)), lty = 3, col = "gray70")
