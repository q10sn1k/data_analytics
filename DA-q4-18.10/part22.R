# Построить тепловую карту (heatmap) 4x4: строки — регионы, столбцы — каналы продаж.
# Цвет показывает «интенсивность» (величину продаж).
# Используем base R: функция heatmap() из пакета stats (идёт с базовой установкой).


# МАЛЕНЬКИЙ ДАТАСЕТ (МАТРИЦА 4x4)
Regions <- c("Север", "Юг", "Запад", "Восток")
Channels <- c("Online", "Retail", "Partner", "Direct")

sales_matrix <- matrix(
  c(
    # Online, Retail, Partner, Direct  (для региона «Север»)
    45,      30,     20,      25,
    # для «Юг»
    35,      28,     18,      22,
    # для «Запад»
    50,      40,     25,      30,
    # для «Восток»
    38,      33,     21,      24
  ),
  nrow = 4, ncol = 4, byrow = TRUE
)

rownames(sales_matrix) <- Regions
colnames(sales_matrix) <- Channels

sales_matrix
#      Online Retail Partner Direct
# Север     45     30      20     25
# Юг        35     28      18     22
# Запад     50     40      25     30
# Восток    38     33      21     24

# ЦВЕТОВАЯ ПАЛИТРА: от «светло» к «ярко»
pal <- grDevices::colorRampPalette(c("white", "orange", "red"))(50)

# HEATMAP:
# По умолчанию heatmap() делает кластеризацию и может ПЕРЕУПОРЯДОЧИТЬ
# строки/столбцы. Чтобы СОХРАНИТЬ исходный порядок — ставим Rowv=NA, Colv=NA.
# scale="none" — не масштабируем значения (берём как есть).
heatmap(
  sales_matrix,
  Rowv = NA, Colv = NA,
  scale = "none",
  col = pal,
  margins = c(6, 6),   # отступы (ниже, слева) для подписей
  main = "Тепловая карта: продажи по регионам и каналам"
)

# ПОДСКАЗКИ:
# - Чем «краснее» ячейка, тем больше продажи.
# - Heatmap помогает быстро увидеть «горячие точки» (напр., «Запад–Online»).
# - Для более сложных аннотаций и легенд можно использовать пакет pheatmap,
#   но в учебных целях достаточно базовой heatmap().
